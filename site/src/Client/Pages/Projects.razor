@page "/Projects"
@using TSITSolutions.ContactSite.Shared.Projects
@inject StronglyTypedStringLocalizerForResource Localizer
@inject HttpClient Http

<PageTitle>@Localizer.CompanyName - @Localizer.ProjectsPageTitle</PageTitle>

<MudText Typo="Typo.h3">@Localizer.ProjectsHeader</MudText>

<MudGrid>
    @foreach (var project in _projects)
    {
        <MudItem xs="12" sm="6" md="4" lg="3">
            <MudCard Outlined="true">
                <MudCardHeader>
                    <CardHeaderContent>
                        <MudText Typo="Typo.h6">@project.Title</MudText>
                    </CardHeaderContent>
                </MudCardHeader>
                <MudCardContent>
                    <MudText Typo="Typo.caption">@project.Technologies</MudText>
                </MudCardContent>
                <MudCardActions>
                    <MudButton Variant="Variant.Text" Color="Color.Primary" Href="@("/ProjectDetails/" + project.Id)">Read More</MudButton>
                </MudCardActions>
            </MudCard>
        </MudItem>
    }
</MudGrid>

@code
{
    private List<ProjectResponse> _projects = new();

    protected override async Task OnInitializedAsync()
    {
        var projectsResponse =  await Http.GetFromJsonAsync<ProjectsResponse>("/api/Projects");
        _projects = projectsResponse.Projects.ToList();
    }
}